<!DOCTYPE html>
<html lang="en">
  <head>
     <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M5G7QKBJ');</script>
<!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="We are pleased to introduce Mantra Attorneys LP, a dynamic law firm that has been providing expert legal advisory services since 2024. Our firm is built on three core pillars: professionalism, effectiveness, and complexity of solutions for our clients."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mantra Attorneys LP &mdash; Your Law firm</title>

    <link
      rel="icon"
      href="./Images/MantraA1.png"
      sizes="any"
      type="image/png"
    />
     <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="global.css" />

    <script
      type="module"
      src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule=""
      src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"
    ></script>

    <script
      src="https://kit.fontawesome.com/f567a8bfa0.js"
      crossorigin="anonymous"
    ></script>

    <!-- scrolling link for sefari -->
    <script
      defer
      src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"
    ></script>
     <style>
      /* Container */
.dashboard-container {
  max-width: 1000px;
  margin: 20rem auto;
  padding: 2rem;
  background: white;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
  border-radius: 8px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #222;
}

.dashboard-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  border-bottom: 1px solid #eee;
  padding-bottom: 1rem;
}

.welcome-message h1 {
  margin: 0;
  font-size: 2.2rem;
  color: #333;
}

.welcome-message h2 {
  margin: 0;
  font-weight: 400;
  color: #777;
  font-size: 1.8rem;
}

.logout-btn {
  background-color: goldenrod;
  color: white;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1.8rem;
  cursor: pointer;
  border-radius: 5px;
  transition: background-color 0.3s ease;
}

.logout-btn:hover {
  background-color: #e1b74d;
}

.summary {
  display: flex;
  justify-content: space-between;
  margin-bottom: 2rem;
  gap: 2rem;
}

.summary-item {
  flex: 1;
  background: #f9f9f9;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
  text-align: center;
}

.summary-item h3 {
  margin-bottom: 0.5rem;
  color: #555;
  font-size: 1.5rem;
}

.summary-item span {
  font-size: 2rem;
  font-weight: bold;
  display: block;
  margin-bottom: 1rem;
  color: #333;
}

.summary-item button {
  background-color: #000036;
  color: white;
  border: none;
  padding: 0.6rem 1.2rem;
  font-size: 1.6rem;
  cursor: pointer;
  border-radius: 5px;
  transition: background-color 0.3s ease;
}

.summary-item button:hover {
  background-color: #000036;
}

.dashboard-columns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
}

.dashboard-column {
  background: #fefefe;
  padding: 1.5rem;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.07);
  min-height: 300px;
  overflow-y: auto;
}

.dashboard-column h2 {
  margin-top: 0;
  color: #333;
  margin-bottom: 1rem;
  border-bottom: 1px solid #ddd;
  padding-bottom: 0.5rem;
}

.loading {
  font-style: italic;
  color: #777;
  margin-bottom: 1rem;
}

.booking-list {
  list-style-type: none;
  padding-left: 0;
  max-height: 450px;
  overflow-y: auto;
}

.booking-list li {
  border-bottom: 1px solid #eee;
  padding: 0.8rem 0;
  font-size: 1.5rem;
  color: #444;
}

.booking-list li strong {
  color: #222;
}

.error-message {
  color: #e74c3c;
  font-weight: 600;
  margin-top: 2rem;
  font-size: 1.1rem;
  text-align: center;
}

/* Responsive */

@media (max-width: 768px) {
  .dashboard-container {
    margin: 2rem 1rem;
  }

  .summary {
    flex-direction: column;
  }

  .dashboard-columns {
    grid-template-columns: 1fr;
  }

  .summary-item {
    margin-bottom: 1.5rem;
  }
}


  </style>
  </head>
  <body class="sticky">

     <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5G7QKBJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    
      <header class="header">
        <div class="logo-div">
          <img
            class="logo-img"
            alt="Mantra Attorneys LP logo"
            src="./MantraA1.png"
          />
          <h1>Mantra Attorneys LP</h1>
        </div>

        <nav class="main-nav">
          <ul class="main-nav-list">
            <li>
              <a class="main-nav-link" href="../../frontend/index.html"
                ><i class="fa-solid fa-house"></i> Homepage</a
              >
            </li> 
          </ul>
        </nav>

        <button class="btn-mobile-nav">
          <ion-icon class="icon-mobile-nav" name="menu-outline"></ion-icon>
          <ion-icon class="icon-mobile-nav" name="close-outline"></ion-icon>
        </button>
      </header>

    <main>
      <section>
  <div class="dashboard-container">
    <header class="dashboard-header">
      <div class="welcome-message">
        <h1>Admin Dashboard</h1>
        <h2>Welcome, Admin</h2>
      </div>
      <button class="logout-btn" onclick="logout()">Logout</button>
    </header>

    <section class="summary">
      <div class="summary-item">
        <h3>Total Bookings:</h3>
        <span id="total-bookings">-</span>
        <button onclick="fetchBookings()">View Bookings</button>
      </div>

      <div class="summary-item">
        <h3>Total Contacts:</h3>
        <span id="total-contacts">-</span>
        <button onclick="fetchContacts()">View Contacts</button>
      </div>
    </section>

    <div class="dashboard-columns">
      <section class="dashboard-column" id="bookings-section">
        <h2>Booking Details</h2>
        <p id="bookings-loading" class="loading" style="display:none;">Fetching bookings...</p>
        <ul id="booking-list" class="booking-list"></ul>
      </section>

      <section class="dashboard-column" id="contacts-section">
        <h2>Contact Details</h2>
        <p id="contacts-loading" class="loading" style="display:none;">Fetching contacts...</p>
        <ul id="contact-list" class="booking-list"></ul>
      </section>
    </div>

    <p id="message" class="error-message"></p>
  </div>
</section>
    </main>

     <footer class="footer">
      <div class="container grid grid--footer">
        <div class="logo-col">
          <a href="#" class="footer-logo">
            <img
              class="logo-img"
              alt="company-logo"
              src="./MantraA1.png"
            />
          </a>

          <ul class="social-links">
            <li>
              <a class="footer-link" href="https://www.instagram.com"
                ><ion-icon class="social-icon" name="logo-instagram"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="https://www.facebook.com"
                ><ion-icon class="social-icon" name="logo-facebook"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="https://www.twitter.com"
                ><ion-icon class="social-icon" name="logo-twitter"></ion-icon
              ></a>
            </li>
             <li>
              <a class="footer-link" href="https://www.youtube.com"
                ><ion-icon class="social-icon" name="logo-youtube"></ion-icon>
            </a>
            </li>
             <li>
              <a class="footer-link" href=" https://www.linkedin.com"
                ><ion-icon class="social-icon" name="logo-linkedin"></ion-icon>
                </a>
            </li>
          </ul>

          <p class="copyright">
            Copyright &copy; <span class="year">2027</span> by Mantra Attorney LP, Inc.
            <br>All rights reserved.
          </p>
        </div>

        <div class="address-col">
          <p class="footer-heading">Contact us</p>
          <address class="contacts">
            <h4>LAW OFFICE LAGOS</h4>
            <p class="address">
              1st Chancery House, No 5, 
              C & I Leasing Drive, 
              Lekki Phase 1, (In care of Hill & Springs) 
              Lagos.
            </p>
            <p>
              <a class="footer-link" href="tel:+2348137997815">+234 8137-997-815</a
              ><br />
              <a class="footer-link" href="tel:++2348154517333">+234 8154-517-333</a
              >
              <a class="footer-link" href="mailto:ogundelea076@gmail.com"
                >ogundelea076@gmail.com</a
              >
              <a class="footer-link" href="mailto:mantraattorneys@gmail.com"
                >mantraattorneys@gmail.com</a
              >
            </p>
          </address>
        </div>

        <nav class="nav-col">
          <p class="footer-heading">Practice Area</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Litigation_strategy" target="_blank">Litigation</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Maritime." target="_blank">Maritime law</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Tax_law" target="_blank">Taxation</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Labour_law" target="">Labour law</a></li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Company</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="./legalProcess-form.html">Engage Us</a></li>
            <li><a class="footer-link" href="./legalServices.html">File a case</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Court" target="_blank">Courts</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Chambers_and_Partners" target="_blank">Chambers</a></li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Resources</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Index_of_law_articles" target="_blank">Articles</a></li>
            <li><a class="footer-link" href="https://www.amazon.com/Law-Nigerian-Studies-Books/s?rh=n%3A10777%2Cp_28%3ANigerian%2BStudies" target="_blank">Book</a></li>
            <li><a class="footer-link" href="https://www.nigerianbar.org.ng/" target="_blank">News</a></li>
            <li><a class="footer-link" href="./privacy-policy.html" target="_blank">Privacy Policy</a></li>
          </ul>
        </nav>
      </div>
    </footer>
     <script src="script.js"></script>
   
   <script>
    const API_BOOKINGS_URL = '/api/v1/booking';
const API_CONTACTS_URL = '/api/v1/contact-us';
const token = localStorage.getItem('authToken');

if (!token) {
  window.location.href = '/adminLogin.html';
}

function logout() {
  localStorage.removeItem('authToken');
  window.location.href = '/adminLogin.html';
}

function setMessage(msg, isError = false) {
  const messageEl = document.getElementById('message');
  messageEl.textContent = msg;
  messageEl.style.color = isError ? '#e74c3c' : '#27ae60';
}

// Fetch and display bookings
async function fetchBookings() {
  setMessage('');
  const loading = document.getElementById('bookings-loading');
  const list = document.getElementById('booking-list');
  const totalBookings = document.getElementById('total-bookings');

  loading.style.display = 'block';
  list.innerHTML = '';

  try {
    const res = await fetch(API_BOOKINGS_URL, {
      headers: { 'Authorization': 'Bearer ' + token }
    });

    if (!res.ok) throw new Error('Failed to fetch bookings.');

    const bookings = await res.json();

    totalBookings.textContent = bookings.length;

    if (bookings.length === 0) {
      list.innerHTML = '<li>No bookings found.</li>';
    } else {
      bookings.forEach(b => {
        const li = document.createElement('li');
        li.innerHTML = `
          <strong>Name:</strong> ${b.name}<br/>
          <strong>Email:</strong> ${b.email}<br/>
          <strong>Phone:</strong> ${b.mobileNo}<br/>
          <strong>Service:</strong> ${b.legalServiceNeeded}<br/>
          <strong>Date:</strong> ${new Date(b.preferredDateAndTime).toLocaleString()}<br/>
          <strong>Comment:</strong> ${b.comment || 'N/A'}<br/>
          <strong>Document(s) Attached:</strong> ${
            b.uploadFile && b.uploadFile.length > 0
              ? `<a href="${b.uploadFile[0].s3Url}" target="_blank" rel="noopener noreferrer">View File</a>`
              : 'No File'
          }
        `;
        list.appendChild(li);
      });
    }
  } catch (err) {
    setMessage('Error fetching bookings. Please try again later.', true);
  } finally {
    loading.style.display = 'none';
  }
}

// Fetch and display contacts
async function fetchContacts() {
  setMessage('');
  const loading = document.getElementById('contacts-loading');
  const list = document.getElementById('contact-list');
  const totalContacts = document.getElementById('total-contacts');

  loading.style.display = 'block';
  list.innerHTML = '';

  try {
    const res = await fetch(API_CONTACTS_URL, {
      headers: { 'Authorization': 'Bearer ' + token }
    });

    if (!res.ok) throw new Error('Failed to fetch contacts.');

    const contacts = await res.json();

    totalContacts.textContent = contacts.length;

    if (contacts.length === 0) {
      list.innerHTML = '<li>No contacts found.</li>';
    } else {
      contacts.forEach(c => {
        const li = document.createElement('li');
        li.innerHTML = `
          <strong>Name:</strong> ${c.fullName}<br/>
          <strong>Email:</strong> ${c.email}<br/>
          <strong>Message:</strong> ${c.message}<br/>
          <strong>Date:</strong> ${new Date(c.createdAt).toLocaleString()}<br/>
        `;
        list.appendChild(li);
      });
    }
  } catch (err) {
    setMessage('Error fetching contacts. Please try again later.', true);
  } finally {
    loading.style.display = 'none';
  }
}

  </script> 
  </body>
</html>
