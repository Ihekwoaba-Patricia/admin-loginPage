<!DOCTYPE html>
<html lang="en">
  <head>
     <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-M5G7QKBJ');</script>
<!-- End Google Tag Manager -->

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="description"
      content="We are pleased to introduce Mantra Attorneys LP, a dynamic law firm that has been providing expert legal advisory services since 2024. Our firm is built on three core pillars: professionalism, effectiveness, and complexity of solutions for our clients."
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mantra Attorneys LP &mdash; Your Law firm</title>

    <link
      rel="icon"
      href="./Images/MantraA1.png"
      sizes="any"
      type="image/png"
    />
     <link
      href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poetsen+One&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="global.css" />

    <script
      type="module"
      src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule=""
      src="https://unpkg.com/ionicons@5.4.0/dist/ionicons/ionicons.js"
    ></script>

    <script
      src="https://kit.fontawesome.com/f567a8bfa0.js"
      crossorigin="anonymous"
    ></script>

    <!-- scrolling link for sefari -->
    <script
      defer
      src="https://unpkg.com/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js"
    ></script>
     <style>

    .dashboard-container {
      max-width: 900px;
      margin: 20rem auto;
      padding: 20px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .logout-btn {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logout-btn h1 {
      margin: 0;
      color: #2c3e50;
    }

    .logout-btn button {
      background-color: goldenrod;
      color: white;
      border: none;
      padding: 8px 16px;
      cursor: pointer;
      border-radius: 5px;
    }

    .summary h2 {
      color: #000036;
    }

    .booking-list {
      list-style: none;
      padding: 0;
    }

    .booking-list li {
      padding: 12px;
      border-bottom: 1px solid #ccc;
      margin-bottom: 10px;
      line-height: 1.5;
    }

    .error-message {
      color: red;
      font-weight: bold;
      margin-top: 20px;
      font-size: 1.6rem;
    }

    .loading {
      color: #555;
      font-style: italic;
    }
  </style>
  </head>
  <body class="sticky">

     <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M5G7QKBJ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
    
      <header class="header">
        <div class="logo-div">
          <img
            class="logo-img"
            alt="Mantra Attorneys LP logo"
            src="./MantraA1.png"
          />
          <h1>Mantra Attorneys LP</h1>
        </div>

        <nav class="main-nav">
          <ul class="main-nav-list">
            <li>
              <a class="main-nav-link" href="./index.html"
                ><i class="fa-solid fa-house"></i>Home</a
              >
            </li>
          
            <li>
            <a class="main-nav-link nav-cta" href="#my-form"
              ><i class="fa-solid fa-address-card"></i> Log out </a
            >
          </li> 
          </ul>
        </nav>

        <button class="btn-mobile-nav">
          <ion-icon class="icon-mobile-nav" name="menu-outline"></ion-icon>
          <ion-icon class="icon-mobile-nav" name="close-outline"></ion-icon>
        </button>
      </header>

    <main>
      <section>
                 <div class="dashboard-container">
    <section class="logout-btn">
      <h1>Admin Dashboard</h1>
      <h2>Welcome, Admin</h2>
      <button onclick="logout()">Logout</button>
    </section>

    <section class="summary">
      <h2>Total Bookings: <span id="total-bookings">Loading...</span></h2>
    </section>

    <section>
      <h2>Booking Details</h2>
      <p id="loading" class="loading">Fetching bookings...</p>
      <ul id="booking-list" class="booking-list"></ul>
    </section>

    <p id="message" class="error-message"></p>
  </div>
      </section>

    </main>

     <footer class="footer">
      <div class="container grid grid--footer">
        <div class="logo-col">
          <a href="#" class="footer-logo">
            <img
              class="logo-img"
              alt="company-logo"
              src="./MantraA1.png"
            />
          </a>

          <ul class="social-links">
            <li>
              <a class="footer-link" href="https://www.instagram.com"
                ><ion-icon class="social-icon" name="logo-instagram"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="https://www.facebook.com"
                ><ion-icon class="social-icon" name="logo-facebook"></ion-icon
              ></a>
            </li>
            <li>
              <a class="footer-link" href="https://www.twitter.com"
                ><ion-icon class="social-icon" name="logo-twitter"></ion-icon
              ></a>
            </li>
             <li>
              <a class="footer-link" href="https://www.youtube.com"
                ><ion-icon class="social-icon" name="logo-youtube"></ion-icon>
            </a>
            </li>
             <li>
              <a class="footer-link" href=" https://www.linkedin.com"
                ><ion-icon class="social-icon" name="logo-linkedin"></ion-icon>
                </a>
            </li>
          </ul>

          <p class="copyright">
            Copyright &copy; <span class="year">2027</span> by Mantra Attorney LP, Inc.
            <br>All rights reserved.
          </p>
        </div>

        <div class="address-col">
          <p class="footer-heading">Contact us</p>
          <address class="contacts">
            <h4>LAW OFFICE LAGOS</h4>
            <p class="address">
              1st Chancery House, No 5, 
              C & I Leasing Drive, 
              Lekki Phase 1, (In care of Hill & Springs) 
              Lagos.
            </p>
            <p>
              <a class="footer-link" href="tel:+2348137997815">+234 8137-997-815</a
              ><br />
              <a class="footer-link" href="tel:++2348154517333">+234 8154-517-333</a
              >
              <a class="footer-link" href="mailto:ogundelea076@gmail.com"
                >ogundelea076@gmail.com</a
              >
              <a class="footer-link" href="mailto:mantraattorneys@gmail.com"
                >mantraattorneys@gmail.com</a
              >
            </p>
          </address>
        </div>

        <nav class="nav-col">
          <p class="footer-heading">Practice Area</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Litigation_strategy" target="_blank">Litigation</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Maritime." target="_blank">Maritime law</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Tax_law" target="_blank">Taxation</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Labour_law" target="">Labour law</a></li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Company</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="./legalProcess-form.html">Engage Us</a></li>
            <li><a class="footer-link" href="./legalServices.html">File a case</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Court" target="_blank">Courts</a></li>
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Chambers_and_Partners" target="_blank">Chambers</a></li>
          </ul>
        </nav>

        <nav class="nav-col">
          <p class="footer-heading">Resources</p>
          <ul class="footer-nav">
            <li><a class="footer-link" href="https://en.wikipedia.org/wiki/Index_of_law_articles" target="_blank">Articles</a></li>
            <li><a class="footer-link" href="https://www.amazon.com/Law-Nigerian-Studies-Books/s?rh=n%3A10777%2Cp_28%3ANigerian%2BStudies" target="_blank">Book</a></li>
            <li><a class="footer-link" href="https://www.nigerianbar.org.ng/" target="_blank">News</a></li>
            <li><a class="footer-link" href="./privacy-policy.html" target="_blank">Privacy Policy</a></li>
          </ul>
        </nav>
      </div>
    </footer>
     <script src="script.js"></script>
   
  
  <script>
    const API_URL = '/api/v1/booking';
    const token = localStorage.getItem('authToken');

    if (!token) {
      window.location.href = '/adminLogin.html';
    }

    function logout() {
      localStorage.removeItem('authToken');
      window.location.href = '/adminLogin.html';
    }

    fetch(API_URL, {
      headers: {
        'Authorization': 'Bearer ' + token
      }
    })
    .then(response => {
      if (!response.ok) throw new Error('Unauthorized');
      return response.json();
    })
    .then(bookings => {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('total-bookings').textContent = bookings.length;

      const list = document.getElementById('booking-list');
      bookings.forEach(booking => {
        const li = document.createElement('li');
        li.innerHTML = `
          <strong>Name: </strong> ${booking.name}<br/>
          <strong>Email: </strong> ${booking.email}<br/>
          <strong>Phone: </strong> ${booking.mobileNo}<br/>
          <strong>Service: </strong> ${booking.legalServiceNeeded}<br/>
          <strong>Date: </strong> ${new Date(booking.preferredDateAndTime).toLocaleString()}<br/>
          <strong>Comment: </strong> ${booking.comment || 'N/A'}<br/>
          <strong>Document(s) Attached: </strong>   ${booking.uploadFile && b.uploadFile.length > 0? `<a href="${b.uploadFile[0].s3Url}" target="_blank">View File</a>`: 'No File'}
        `;
        list.appendChild(li);
      });
    })
    .catch(err => {
      document.getElementById('loading').style.display = 'none';
      const msg = document.getElementById('message');
      msg.textContent = 'Access denied or session expired. Redirecting to login...';
      setTimeout(() => window.location.href = '/adminLogin.html', 4000);
    });
  </script>

  </body>
</html>
